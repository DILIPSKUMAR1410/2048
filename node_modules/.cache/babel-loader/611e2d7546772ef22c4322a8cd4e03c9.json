{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/home/aashan/2048/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/aashan/2048/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/home/aashan/2048/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/home/aashan/2048/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _get = require(\"/home/aashan/2048/node_modules/@babel/runtime/helpers/get\");\n\nvar _inherits = require(\"/home/aashan/2048/node_modules/@babel/runtime/helpers/inherits\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar cheerio = require(\"cheerio\");\n\nvar service_1 = require(\"./service\");\n\nvar Instagram =\n/*#__PURE__*/\nfunction (_service_1$Service) {\n  _inherits(Instagram, _service_1$Service);\n\n  function Instagram() {\n    _classCallCheck(this, Instagram);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Instagram).apply(this, arguments));\n  }\n\n  _createClass(Instagram, null, [{\n    key: \"getBaseUrls\",\n    value: function getBaseUrls() {\n      var baseUrls = ['https://www.instagram.com/', 'https://instagram.com/'];\n      return baseUrls;\n    }\n  }, {\n    key: \"getProofUrl\",\n    value: function getProofUrl(proof) {\n      var baseUrls = this.getBaseUrls();\n      var normalizedProofUrl = this.normalizeUrl(proof);\n\n      for (var i = 0; i < baseUrls.length; i++) {\n        if (normalizedProofUrl.startsWith(\"\".concat(baseUrls[i]))) {\n          return normalizedProofUrl;\n        }\n      }\n\n      throw new Error(\"Proof url \".concat(proof.proof_url, \" is not valid for service \").concat(proof.service));\n    }\n  }, {\n    key: \"normalizeUrl\",\n    value: function normalizeUrl(proof) {\n      var proofUrl = proof.proof_url;\n      proofUrl = _get(_getPrototypeOf(Instagram), \"prefixScheme\", this).call(this, proofUrl);\n\n      if (proofUrl.startsWith('https://instagram.com')) {\n        var tokens = proofUrl.split('https://instagram.com');\n        proofUrl = \"https://www.instagram.com\".concat(tokens[1]);\n      }\n\n      return proofUrl;\n    }\n  }, {\n    key: \"shouldValidateIdentityInBody\",\n    value: function shouldValidateIdentityInBody() {\n      return true;\n    }\n  }, {\n    key: \"getProofIdentity\",\n    value: function getProofIdentity(searchText) {\n      var $ = cheerio.load(searchText);\n      var username = $('meta[property=\"og:description\"]').attr('content');\n\n      if (username !== undefined && username.split(':').length > 1) {\n        return username.split(':')[0].match(/(@\\w+)/)[0].substr(1);\n      } else {\n        return '';\n      }\n    }\n  }, {\n    key: \"getProofStatement\",\n    value: function getProofStatement(searchText) {\n      var $ = cheerio.load(searchText);\n      var statement = $('meta[property=\"og:description\"]').attr('content');\n\n      if (statement !== undefined && statement.split(':').length > 1) {\n        return statement.split(':')[1].trim().replace('“', '').replace('”', '');\n      } else {\n        return '';\n      }\n    }\n  }]);\n\n  return Instagram;\n}(service_1.Service);\n\nexports.Instagram = Instagram;","map":{"version":3,"sources":["../../../src/profiles/services/instagram.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;IAEM,S;;;;;;;;;;;;;kCACc;AAChB,UAAM,QAAQ,GAAG,CAAC,4BAAD,EAA+B,wBAA/B,CAAjB;AACA,aAAO,QAAP;AACD;;;gCAEkB,K,EAAU;AAC3B,UAAM,QAAQ,GAAG,KAAK,WAAL,EAAjB;AACA,UAAM,kBAAkB,GAAG,KAAK,YAAL,CAAkB,KAAlB,CAA3B;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,QAAQ,CAAC,MAA7B,EAAqC,CAAC,EAAtC,EAA0C;AACxC,YAAI,kBAAkB,CAAC,UAAnB,WAAiC,QAAQ,CAAC,CAAD,CAAzC,EAAJ,EAAqD;AACnD,iBAAO,kBAAP;AACD;AACF;;AACD,YAAM,IAAI,KAAJ,qBAAuB,KAAK,CAAC,SAA7B,uCAAmE,KAAK,CAAC,OAAzE,EAAN;AACD;;;iCAEmB,K,EAAU;AAC5B,UAAI,QAAQ,GAAG,KAAK,CAAC,SAArB;AACA,MAAA,QAAQ,qEAAsB,QAAtB,CAAR;;AAEA,UAAI,QAAQ,CAAC,UAAT,CAAoB,uBAApB,CAAJ,EAAkD;AAChD,YAAM,MAAM,GAAG,QAAQ,CAAC,KAAT,CAAe,uBAAf,CAAf;AACA,QAAA,QAAQ,sCAA+B,MAAM,CAAC,CAAD,CAArC,CAAR;AACD;;AACD,aAAO,QAAP;AACD;;;mDAEkC;AACjC,aAAO,IAAP;AACD;;;qCAEuB,U,EAAkB;AACxC,UAAM,CAAC,GAAG,OAAO,CAAC,IAAR,CAAa,UAAb,CAAV;AACA,UAAM,QAAQ,GAAG,CAAC,CAAC,iCAAD,CAAD,CAAqC,IAArC,CAA0C,SAA1C,CAAjB;;AACA,UAAI,QAAQ,KAAK,SAAb,IAA0B,QAAQ,CAAC,KAAT,CAAe,GAAf,EAAoB,MAApB,GAA6B,CAA3D,EAA8D;AAC5D,eAAO,QAAQ,CAAC,KAAT,CAAe,GAAf,EAAoB,CAApB,EAAuB,KAAvB,CAA6B,QAA7B,EAAuC,CAAvC,EAA0C,MAA1C,CAAiD,CAAjD,CAAP;AACD,OAFD,MAEO;AACL,eAAO,EAAP;AACD;AACF;;;sCAEwB,U,EAAkB;AACzC,UAAM,CAAC,GAAG,OAAO,CAAC,IAAR,CAAa,UAAb,CAAV;AACA,UAAM,SAAS,GAAG,CAAC,CAAC,iCAAD,CAAD,CACf,IADe,CACV,SADU,CAAlB;;AAGA,UAAI,SAAS,KAAK,SAAd,IAA2B,SAAS,CAAC,KAAV,CAAgB,GAAhB,EAAqB,MAArB,GAA8B,CAA7D,EAAgE;AAC9D,eAAO,SAAS,CAAC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,EAAwB,IAAxB,GAA+B,OAA/B,CAAuC,GAAvC,EAA4C,EAA5C,EAAgD,OAAhD,CAAwD,GAAxD,EAA6D,EAA7D,CAAP;AACD,OAFD,MAEO;AACL,eAAO,EAAP;AACD;AACF;;;;EArDqB,SAAA,CAAA,O;;AAwDf,OAAA,CAAA,SAAA,GAAA,SAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cheerio = require(\"cheerio\");\nconst service_1 = require(\"./service\");\nclass Instagram extends service_1.Service {\n    static getBaseUrls() {\n        const baseUrls = ['https://www.instagram.com/', 'https://instagram.com/'];\n        return baseUrls;\n    }\n    static getProofUrl(proof) {\n        const baseUrls = this.getBaseUrls();\n        const normalizedProofUrl = this.normalizeUrl(proof);\n        for (let i = 0; i < baseUrls.length; i++) {\n            if (normalizedProofUrl.startsWith(`${baseUrls[i]}`)) {\n                return normalizedProofUrl;\n            }\n        }\n        throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`);\n    }\n    static normalizeUrl(proof) {\n        let proofUrl = proof.proof_url;\n        proofUrl = super.prefixScheme(proofUrl);\n        if (proofUrl.startsWith('https://instagram.com')) {\n            const tokens = proofUrl.split('https://instagram.com');\n            proofUrl = `https://www.instagram.com${tokens[1]}`;\n        }\n        return proofUrl;\n    }\n    static shouldValidateIdentityInBody() {\n        return true;\n    }\n    static getProofIdentity(searchText) {\n        const $ = cheerio.load(searchText);\n        const username = $('meta[property=\"og:description\"]').attr('content');\n        if (username !== undefined && username.split(':').length > 1) {\n            return username.split(':')[0].match(/(@\\w+)/)[0].substr(1);\n        }\n        else {\n            return '';\n        }\n    }\n    static getProofStatement(searchText) {\n        const $ = cheerio.load(searchText);\n        const statement = $('meta[property=\"og:description\"]')\n            .attr('content');\n        if (statement !== undefined && statement.split(':').length > 1) {\n            return statement.split(':')[1].trim().replace('“', '').replace('”', '');\n        }\n        else {\n            return '';\n        }\n    }\n}\nexports.Instagram = Instagram;\n//# sourceMappingURL=instagram.js.map"]},"metadata":{},"sourceType":"script"}